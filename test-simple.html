<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlasmoWallet æ³¨å…¥æµ‹è¯•</title>
</head>
<body>
    <h1>ğŸ”— PlasmoWallet æ³¨å…¥æµ‹è¯•</h1>
    <div id="status">æ£€æŸ¥ä¸­...</div>

    <script src="test-injection.js"></script>

    <script>
        // ç›‘å¬æ¥è‡ªæ‰©å±•çš„äº‹ä»¶
        window.addEventListener('ethereum#initialized', (event) => {
            console.log('ğŸ¯ æ¥æ”¶åˆ° ethereum#initialized äº‹ä»¶', event);
            updateStatus();
        });

        window.addEventListener('plasmoWallet#initialized', (event) => {
            console.log('ğŸ¯ æ¥æ”¶åˆ° plasmoWallet#initialized äº‹ä»¶', event);
            updateStatus();
        });

        function updateStatus() {
            const status = document.getElementById('status');
            const interfaces = [
                { name: 'window.plasmoEthereum', exists: !!window.plasmoEthereum },
                { name: 'window.myPlasmoWallet', exists: !!window.myPlasmoWallet },
                { name: 'window.plasmoWallet', exists: !!window.plasmoWallet },
                { name: 'window.ethereum', exists: !!window.ethereum }
            ];

            status.innerHTML = interfaces.map(iface =>
                `<div>${iface.name}: ${iface.exists ? 'âœ… å­˜åœ¨' : 'âŒ ä¸å­˜åœ¨'}</div>`
            ).join('');
        }

        // ç«‹å³æ›´æ–°çŠ¶æ€
        updateStatus();

        // 1ç§’åå†æ£€æŸ¥
        setTimeout(updateStatus, 1000);

        // 3ç§’åå†æ£€æŸ¥
        setTimeout(updateStatus, 3000);
    </script>
</body>
</html>